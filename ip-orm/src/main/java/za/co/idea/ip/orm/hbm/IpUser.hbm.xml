<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- Mapping file autogenerated by MyEclipse Persistence Tools -->
<hibernate-mapping>
	<class name="za.co.idea.ip.orm.bean.IpUser" table="ip_user">
		<id name="userId" type="java.lang.Long">
			<column name="user_id" />
			<generator class="assigned" />
		</id>
		<many-to-one name="ipGroup" class="za.co.idea.ip.orm.bean.IpGroup" fetch="select" lazy="proxy">
			<column name="pri_grp_id" />
		</many-to-one>
		<property name="userFName" type="java.lang.String">
			<column name="user_f_name" length="75" not-null="true" />
		</property>
		<property name="userLName" type="java.lang.String">
			<column name="user_l_name" length="75" not-null="true" />
		</property>
		<property name="userMName" type="java.lang.String">
			<column name="user_m_name" length="45" />
		</property>
		<property name="userIdNum" type="java.lang.Long">
			<column name="user_id_num" />
		</property>
		<property name="userScreenName" type="java.lang.String">
			<column name="user_screen_name" length="50" not-null="true" unique="true" />
		</property>
		<property name="userEmail" type="java.lang.String">
			<column name="user_email" length="65535" />
		</property>
		<property name="userContact" type="java.lang.String">
			<column name="user_contact" length="20" />
		</property>
		<property name="userSkills" type="java.lang.String">
			<column name="user_skills" length="65535" />
		</property>
		<property name="userBio" type="java.lang.String">
			<column name="user_bio" length="65535" />
		</property>
		<property name="userFbHandle" type="java.lang.String">
			<column name="user_fb_handle" length="65535" />
		</property>
		<property name="userTwHandle" type="java.lang.String">
			<column name="user_tw_handle" length="65535" />
		</property>
		<property name="userStatus" type="java.lang.String">
			<column name="user_status" length="1" not-null="true" />
		</property>
		<property name="userEmployeeId" type="java.lang.String">
			<column name="user_employeeId" length="20" />
		</property>
		<set name="ipGroups" inverse="true">
			<key>
				<column name="group_admin_id" />
			</key>
			<one-to-many class="za.co.idea.ip.orm.bean.IpGroup" />
		</set>
		<set name="ipGroupUsers" inverse="true">
			<key>
				<column name="gu_usr_id" not-null="true" />
			</key>
			<one-to-many class="za.co.idea.ip.orm.bean.IpGroupUser" />
		</set>
		<set name="ipTags" inverse="true">
			<key>
				<column name="tag_user_id" />
			</key>
			<one-to-many class="za.co.idea.ip.orm.bean.IpTag" />
		</set>
		<set name="ipFunctions" inverse="true">
			<key>
				<column name="func_crtd_by" />
			</key>
			<one-to-many class="za.co.idea.ip.orm.bean.IpFunction" />
		</set>
		<set name="ipClaims" inverse="true">
			<key>
				<column name="user_id" />
			</key>
			<one-to-many class="za.co.idea.ip.orm.bean.IpClaim" />
		</set>
		<set name="ipPointses" inverse="true">
			<key>
				<column name="user_id" />
			</key>
			<one-to-many class="za.co.idea.ip.orm.bean.IpPoints" />
		</set>
		<set name="ipChallenges" inverse="true">
			<key>
				<column name="chal_crtd_by" not-null="true" />
			</key>
			<one-to-many class="za.co.idea.ip.orm.bean.IpChallenge" />
		</set>
		<set name="ipIdeas" inverse="true">
			<key>
				<column name="idea_user_id" not-null="true" />
			</key>
			<one-to-many class="za.co.idea.ip.orm.bean.IpIdea" />
		</set>
		<set name="ipLogins" inverse="true">
			<key>
				<column name="login_user_id" not-null="true" unique="true" />
			</key>
			<one-to-many class="za.co.idea.ip.orm.bean.IpLogin" />
		</set>
		<set name="ipSolutions" inverse="true">
			<key>
				<column name="sol_crtd_by" not-null="true" />
			</key>
			<one-to-many class="za.co.idea.ip.orm.bean.IpSolution" />
		</set>
	</class>
	<sql-query name="updateImage">
		update ip_user set user_avatar=:avatar where user_id=:id
	</sql-query>
	<sql-query name="sortListByPrimaryGrp">
		select iu.* from ip_user iu, ip_group ig where iu.pri_grp_id=ig.group_id order by ig.group_name
		<return alias="iu" class="za.co.idea.ip.orm.bean.IpUser" />
	</sql-query>
	<sql-query name="getSolCountByUserId">
		select count(*) as solCount from ip_solution sol where sol.sol_crtd_by=:id
		<return-scalar column="solCount" type="java.lang.Long" />
	</sql-query>
	<sql-query name="getChalCountByUserId">
		select count(*) as chalCount from ip_challenge chal where chal.chal_crtd_by=:id
		<return-scalar column="chalCount" type="java.lang.Long" />
	</sql-query>
	<sql-query name="getIdeasCountByUserId">
		select count(*) as ideaCount from ip_idea idea where idea.idea_user_id=:id
		<return-scalar column="ideaCount" type="java.lang.Long" />
	</sql-query>
	<sql-query name="getWhishListCountByUserId">
		select count(*) as whishListCount from ip_tag t where t.tag_user_id=:id and t.tag_entity_type=4 and t.tag_type=4
		<return-scalar column="whishListCount" type="java.lang.Long" />
	</sql-query>
</hibernate-mapping>